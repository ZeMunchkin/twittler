<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>
    <link rel='stylesheet' href="stylesheet.css">
  </head>
  <body>

    <h1>t w i t t l e r</h1>
    <br>
    <br>
    <br>
    <ul id='tweetList'></ul>

    <script>

      $(document).ready(function(){




        var displayTweet = function (tweetObj) {
          var tweetTime = tweetObj.created_at;
          var user = tweetObj.user;
          var $tweet = $('<li class="message" data-user="' + user + '"></li>');
          $tweet.html('@<span class="user">' + user + '</span>: ' + tweetObj.message);

          var $tweetTime = $('<li class="time"></li>');
          $tweetTime.text(moment(tweetTime).format('LLLL'));

          $tweetTime.prependTo('#tweetList');
          $tweet.prependTo('#tweetList');


        }

        var tweetNumbers = 1;
        for (var i = 0; i < streams.home.length; i++){
          var currentTweet = streams.home[i];
          displayTweet(currentTweet);
          tweetNumbers += 1;


        }


        setInterval(function () {
          var currentNumTweets = streams.home.length;
          var currentTweets = streams.home;

          if (currentNumTweets > tweetNumbers) {
            var newTweets = currentTweets.slice((tweetNumbers + 1));

            for (var index = 0; index < newTweets.length; index++) {
              displayTweet(newTweets[index]);
            }
            tweetNumbers = currentTweets.length;
          }
        }, 1500);




  /*      var displayUserTweets = (user) {
          $('.message').css({'display': 'none'});
          var userTweets = streams.users['user'];

        };

*/

        $('.user').on('click', function () {
          var currentUser = $(this).closest('.user').val();
          console.log(currentUser);
          //access streams.home and find all tweets with same user
          //
        });

      });

    </script>
  </body>
</html>
